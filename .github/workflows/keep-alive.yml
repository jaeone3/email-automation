name: Keep Repository Active

# GitHub은 60일간 커밋이 없으면 scheduled workflow를 자동 비활성화합니다.
# 이 workflow는 55일마다 실행되어 빈 커밋을 생성하여 비활성화를 방지합니다.

on:
  schedule:
    # 55일마다 실행 (60일 이전에 활성 상태 유지)
    # UTC 0시 = 한국 시간 9시
    - cron: '0 0 */55 * *'
  workflow_dispatch:  # 수동 실행 가능

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # 레포에 커밋 push 권한 필요
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Configure Git
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
      
      - name: Create empty commit
        run: |
          git commit --allow-empty -m "chore: keep repository active for scheduled workflows"
      
      - name: Push changes
        run: |
          git push origin main
